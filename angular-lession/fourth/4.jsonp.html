<!DOCTYPE html>
<html lang="en" ng-app="appModule">
<head>
    <meta charset="UTF-8">
    <title>珠峰培训http://www.zhufengpeixun.cn</title>
    <link rel="stylesheet" href="./node_modules/bootstrap/dist/css/bootstrap.css">
</head>
<body ng-controller="myCtrl">
<div class="container">
    <p class="h3 text-danger">百度搜索</p>
    <input type="text" class="form-control" ng-keyup="search($event)" ng-model="query">
    <ul class="list-group">
        <li class="list-group-item" ng-repeat="item in lists track by $index" ng-class="{active:index==$index}">{{item}}</li>
        <!--index是当前按上下键后 选择数组中的某一个索引-->
    </ul>
</div>
<script src="node_modules/angular/angular.js"></script>
<script>
    var app = angular.module('appModule', []);
    //angular提供给我们一个方法$http angular中的ajax用法同jquery
    app.controller('myCtrl', ['$scope', '$http', '$sce', function ($scope, $http, $sce) {
        //百度接口要设置callback 并且callback名字要是cb
        $scope.lists = [];
        //声明一个选中的索引
        $scope.index = -1;
        $scope.search = function (e) {
            var keyCode = e.keyCode;
            if(keyCode == 38||keyCode == 40){
                if (keyCode == 38) { //上
                    $scope.index-=1;
                }
                if (keyCode == 40) { //下
                    $scope.index+=1;
                }
                //给输入框赋予一个选择的值
                return $scope.query = $scope.lists[$scope.index];
            }
            $http.jsonp(
                    $sce.trustAsResourceUrl('https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd=' + $scope.query),
                    {jsonpCallbackParam: 'cb'}
            ).then(function (res) { //成功的回调
                $scope.lists = res.data.s;
            });
        };
    }]);
</script>
</body>
</html>